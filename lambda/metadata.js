!function(t,e){for(var n in e)t[n]=e[n]}(exports,function(t){var e={};function n(i){if(e[i])return e[i].exports;var a=e[i]={i:i,l:!1,exports:{}};return t[i].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)n.d(i,a,function(e){return t[e]}.bind(null,a));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=4)}([function(t,e){t.exports=require("web3")},function(t,e){t.exports=require("regenerator-runtime/runtime")},function(t,e){t.exports=require("dotenv")},function(t,e){t.exports=require("querystring")},function(t,e,n){"use strict";n.r(e);n(1);function i(t,e,n,i,a,r,p){try{var u=t[r](p),s=u.value}catch(t){return void n(t)}u.done?e(s):Promise.resolve(s).then(i,a)}n(3);var a=n(0),r=n.n(a),p=[{inputs:[],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"approved",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"operator",type:"address"},{indexed:!1,internalType:"bool",name:"approved",type:"bool"}],name:"ApprovalForAll",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!0,internalType:"uint256",name:"tokenId",type:"uint256"}],name:"Transfer",type:"event"},{inputs:[],name:"ANIMATION_COUNT",outputs:[{internalType:"int256",name:"",type:"int256"}],stateMutability:"view",type:"function"},{inputs:[],name:"ARTIST_PRINTS",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"TOKEN_LIMIT",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"approve",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"baseURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"string",name:"seed",type:"string"},{internalType:"uint256[2]",name:"counts",type:"uint256[2]"},{internalType:"int256[13]",name:"dials",type:"int256[13]"},{internalType:"bool[3]",name:"switches",type:"bool[3]"}],name:"createBox",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"creator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"currentPrice",outputs:[{internalType:"uint256",name:"price",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"getApproved",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"operator",type:"address"}],name:"isApprovedForAll",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"ownerOf",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"string",name:"seed",type:"string"},{internalType:"uint256[2]",name:"counts",type:"uint256[2]"},{internalType:"int256[13]",name:"dials",type:"int256[13]"},{internalType:"bool[3]",name:"switches",type:"bool[3]"},{internalType:"uint256",name:"animation",type:"uint256"},{internalType:"uint256",name:"frame",type:"uint256"}],name:"perpetualRenderer",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"priceAt",outputs:[{internalType:"uint256",name:"price",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"},{internalType:"bytes",name:"_data",type:"bytes"}],name:"safeTransferFrom",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"address",name:"operator",type:"address"},{internalType:"bool",name:"approved",type:"bool"}],name:"setApprovalForAll",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes4",name:"interfaceId",type:"bytes4"}],name:"supportsInterface",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"tokenAnimation",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"tokenArt",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"tokenCounts",outputs:[{internalType:"uint256[]",name:"",type:"uint256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"tokenData",outputs:[{internalType:"uint256",name:"seed",type:"uint256"},{internalType:"uint256",name:"animation",type:"uint256"},{internalType:"uint256[]",name:"counts",type:"uint256[]"},{internalType:"int256[]",name:"dials",type:"int256[]"},{internalType:"bool[]",name:"switches",type:"bool[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"tokenDials",outputs:[{internalType:"int256[]",name:"",type:"int256[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"},{internalType:"uint256",name:"_frame",type:"uint256"}],name:"tokenFrame",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"uint256",name:"index",type:"uint256"}],name:"tokenOfOwnerByIndex",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"tokenSeed",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"_id",type:"uint256"}],name:"tokenSwitches",outputs:[{internalType:"bool[]",name:"",type:"bool[]"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"tokenURI",outputs:[{internalType:"string",name:"",type:"string"}],stateMutability:"view",type:"function"},{inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"tokenId",type:"uint256"}],name:"transferFrom",outputs:[],stateMutability:"nonpayable",type:"function"}];n(2).config();var u=process.env,s=(u.PINATA_API_KEY,u.PINATA_API_SECRET,u.WALLET_PRIVATE_KEY,u.EXTERNAL_URL_BASE),o=u.WEB3_PROVIDER_ENDPOINT,y=u.CONTRACT_ADDRESS,l=function(t,e){return{statusCode:e,body:JSON.stringify(t)}};exports.handler=function(){var t,e=(t=regeneratorRuntime.mark((function t(e,n){var i,a,u,d,m,c;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=e.queryStringParameters.id,"GET"===e.httpMethod){t.next=6;break}return console.log("Bad method:",e.httpMethod),t.abrupt("return",l("Bad method:"+e.httpMethod,405));case 6:if(void 0!==i){t.next=9;break}return console.log("Undefined ID parameter is required"),t.abrupt("return",l("Undefined ID parameter is required",204));case 9:return console.log("Loading Web3"),a=new r.a(o),u=new a.eth.Contract(p,y),t.next=14,u.methods.ownerOf(i).call();case 14:if("0x0000000000000000000000000000000000000000"!==t.sent){t.next=18;break}return console.log("Token "+i+" dosn't exist"),t.abrupt("return",l("Token "+i+" dosn't exist",204));case 18:return t.next=20,u.methods.tokenData(i).call();case 20:return d=t.sent,t.next=23,u.methods.tokenArt(i).call();case 23:return m=t.sent,c={description:"A scattering of tiny boxes, Aranged in patterns ranging from mundane to magnificent.",external_url:s+i,image_data:m,name:"Token "+i,attributes:[{display_type:"number",trait_type:"Colors",value:toInt(d.counts[0])},{display_type:"number",trait_type:"Shapes",value:toInt(d.counts[1])},{display_type:"number",trait_type:"Animation",value:toInt(d.animation)},{display_type:"number",trait_type:"Seed",value:toInt(d.seed)},{trait_type:"Hatching",value:d.dials[8]},{trait_type:"Mirroring 1",value:d.switches[0]},{trait_type:"Mirroring 2",value:d.switches[1]},{trait_type:"Mirroring 3",value:d.switches[2]}],background_color:"121212",animation_url:""},console.log("Metadata of token "+i),console.log(c),t.abrupt("return",l(c,200));case 30:case"end":return t.stop()}}),t)})),function(){var e=this,n=arguments;return new Promise((function(a,r){var p=t.apply(e,n);function u(t){i(p,a,r,u,s,"next",t)}function s(t){i(p,a,r,u,s,"throw",t)}u(void 0)}))});return function(t,n){return e.apply(this,arguments)}}()}]));